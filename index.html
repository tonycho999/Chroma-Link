<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chroma Link - 색채 혼합 퍼즐</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .cell { width: 60px; height: 60px; border: 1px solid #333; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; }
        .target { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; }
        .bg-none { background-color: #1a1a1a; }
        .bg-red { background-color: #ff4d4d; box-shadow: 0 0 15px #ff4d4d; }
        .bg-green { background-color: #4dff4d; box-shadow: 0 0 15px #4dff4d; }
        .bg-blue { background-color: #4d4dff; box-shadow: 0 0 15px #4d4dff; }
    </style>
</head>
<body class="bg-zinc-900 text-white min-h-screen flex flex-col items-center justify-center p-4">

    <div class="text-center mb-8">
        <h1 class="text-4xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-green-500 to-blue-500">
            CHROMA LINK
        </h1>
        <p class="text-zinc-400 mt-2">빈칸을 클릭해 R-G-B 광원을 배치하고 하단의 목표 색상을 만드세요!</p>
    </div>

    <div id="grid-container" class="grid grid-cols-5 gap-2 bg-zinc-800 p-4 rounded-xl shadow-2xl">
        </div>

    <div class="mt-10 grid grid-cols-3 gap-8 text-center bg-zinc-800 p-6 rounded-lg">
        <div>
            <div id="target-display" class="w-16 h-16 rounded-full mx-auto mb-2 border-4 border-white shadow-lg" style="background-color: magenta;"></div>
            <p class="text-sm font-bold uppercase" id="target-name">목표: 보라(Magenta)</p>
        </div>
        <div class="flex flex-col justify-center">
            <span class="text-2xl font-bold" id="status-icon">❓</span>
            <p id="status-text" class="text-sm">색상 일치 확인 중</p>
        </div>
        <div class="text-left text-xs text-zinc-400">
            <p>● R + B = 보라 (Magenta)</p>
            <p>● R + G = 노랑 (Yellow)</p>
            <p>● G + B = 청록 (Cyan)</p>
            <p>● R + G + B = 흰색 (White)</p>
        </div>
    </div>

    <script>
        const GRID_SIZE = 5;
        let gridState = Array(GRID_SIZE * GRID_SIZE).fill(null);
        const targetColor = { r: 255, g: 0, b: 255 }; // 초기 목표: 보라색

        const container = document.getElementById('grid-container');

        function initGrid() {
            container.innerHTML = '';
            for (let i = 0; i < GRID_SIZE * GRID_SIZE; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell bg-none rounded-md';
                cell.addEventListener('click', () => toggleColor(i, cell));
                container.appendChild(cell);
            }
        }

        function toggleColor(index, element) {
            const colors = [null, 'red', 'green', 'blue'];
            let currentIdx = colors.indexOf(gridState[index]);
            let nextIdx = (currentIdx + 1) % colors.length;
            
            gridState[index] = colors[nextIdx];
            
            // UI 업데이트
            element.className = `cell rounded-md bg-${colors[nextIdx] || 'none'}`;
            element.innerText = colors[nextIdx] ? colors[nextIdx][0].toUpperCase() : '';
            
            calculateLight();
        }

        function calculateLight() {
            let mixed = { r: 0, g: 0, b: 0 };
            
            gridState.forEach(color => {
                if (color === 'red') mixed.r = 255;
                if (color === 'green') mixed.g = 255;
                if (color === 'blue') mixed.b = 255;
            });

            checkWin(mixed);
        }

        function checkWin(mixed) {
            const statusIcon = document.getElementById('status-icon');
            const statusText = document.getElementById('status-text');
            
            if (mixed.r === targetColor.r && mixed.g === targetColor.g && mixed.b === targetColor.b) {
                statusIcon.innerText = '✅';
                statusText.innerText = '성공! 빛이 연결되었습니다.';
                statusText.className = 'text-sm text-green-400 font-bold';
            } else {
                statusIcon.innerText = '❌';
                statusText.innerText = '색상이 맞지 않습니다.';
                statusText.className = 'text-sm text-red-400';
            }
        }

        initGrid();
    </script>
</body>
</html>
